{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/sebastian/Escritorio/timezo/front/src/pages/CreateEvent/Form.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useState, useRef, useEffect } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport { useForm } from 'react-hook-form';\nimport DateFnsUtils from '@date-io/date-fns';\nimport { DateTimePicker, KeyboardDateTimePicker, MuiPickersUtilsProvider } from \"@material-ui/pickers\";\nimport axios from '../../utils/axios';\nimport Chip from '@material-ui/core/Chip';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport es from \"date-fns/locale/es\";\nimport { words } from '../../utils/words';\nimport ReCAPTCHA from \"react-google-recaptcha\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useHistory } from \"react-router-dom\"; //check boxes form.\n\nimport FormLabel from '@material-ui/core/FormLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { LensTwoTone } from '@material-ui/icons';\nconst PurpleCheckbox = withStyles({\n  root: {\n    color: \"#8266E2\",\n    '&$checked': {\n      color: \"#8266E2\"\n    }\n  },\n  checked: {}\n})(props => /*#__PURE__*/_jsxDEV(Checkbox, {\n  color: \"default\",\n  ...props\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 33,\n  columnNumber: 15\n}, this));\n\nconst Form = ({\n  openModalSet\n}) => {\n  _s();\n\n  const {\n    register,\n    errors,\n    handleSubmit\n  } = useForm();\n  const history = useHistory();\n  const auth = useSelector(({\n    auth\n  }) => auth);\n  const [valueAutocomplete, setValueAutocomplete] = React.useState([]);\n  const [selectedDate, handleDateChange] = useState(null);\n  const [captcha, setCaptcha] = useState(null);\n  const [link, setlink] = useState();\n  const [error, setError] = useState();\n  const [bodyFormData, setBodyFormData] = useState();\n  const [loading, setLoading] = useState('Crear');\n  const reRef = useRef();\n  const [checkBoxes, setCheckBoxes] = React.useState({\n    createAccount: false\n  });\n\n  const handleChangeChecks = event => {\n    setCheckBoxes({ ...checkBoxes,\n      [event.target.name]: event.target.checked\n    });\n  };\n\n  const sendDataToServer = async () => {\n    if (bodyFormData) {\n      var response;\n\n      if (auth.token) {\n        response = await axios.post('api/createAuth', bodyFormData, {\n          headers: {\n            'Content-Type': 'multipart/form-data',\n            'Authorization': auth.token\n          }\n        });\n      } else {\n        response = await axios.post('api/create', bodyFormData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n      }\n\n      setLoading('Crear');\n\n      if (response.data.message) {\n        setError(response.data.message);\n      } else {\n        history.push(\"/\" + response.data._nick_name + '/' + response.data.id);\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (bodyFormData) {\n      if (checkBoxes.createAccount == false) {\n        sendDataToServer();\n      } else if (checkBoxes.createAccount == true && auth.token) {\n        sendDataToServer();\n      } else {\n        //ejecutar el modal de registro.\n        openModalSet(true);\n      }\n    }\n  }, [bodyFormData, auth.token]);\n  useEffect(() => {\n    if (bodyFormData) {\n      if (checkBoxes.createAccount == false) {\n        sendDataToServer();\n      } else if (checkBoxes.createAccount == true && auth.token) {\n        sendDataToServer();\n      } else {\n        //ejecutar el modal de registro.\n        openModalSet(true);\n      }\n    }\n  }, [auth.token]);\n\n  const onSubmit = async (data, e) => {\n    setError(null);\n    setLoading('Cargando...');\n    debugger;\n    let token_recaptcha = null;\n\n    if (!captcha) {\n      token_recaptcha = await reRef.current.executeAsync();\n      setCaptcha(token_recaptcha);\n    }\n\n    var bodyFormData = new FormData();\n    bodyFormData.append('token_recaptcha', captcha ? captcha : token_recaptcha);\n    bodyFormData.append('_name', data._name);\n    bodyFormData.append('_description', data._description);\n    bodyFormData.append('_categories', JSON.stringify(valueAutocomplete));\n    bodyFormData.append('_event_time', selectedDate);\n    bodyFormData.append('_link_event', data._link_event);\n    bodyFormData.append('galleryImage', data._picture[0]);\n    setBodyFormData(bodyFormData); // ejecuta el useEffect\n  };\n\n  function showExtra() {\n    var element = document.getElementById(\"extra\");\n    var btn = document.getElementById(\"btnExtra\");\n    element.classList.add(\"show\");\n    btn.classList.add(\"hide\");\n  }\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit(onSubmit),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form__event\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cont__form\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form--input\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              value: 'hola',\n              type: \"text\",\n              autocomplete: \"off\",\n              className: \"normal\",\n              placeholder: \"Nombre Evento\",\n              minlength: \"2\",\n              maxlength: \"150\",\n              required: true,\n              name: \"_name\",\n              ref: register({\n                required: {\n                  value: true,\n                  message: 'Ingrese el nombre del evento'\n                }\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Nombre Evento\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form--input optional\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              value: 'hola',\n              type: \"text\",\n              autocomplete: \"off\",\n              className: \"normal\",\n              placeholder: \"Descripci\\xF3n\",\n              minlength: \"0\",\n              maxlength: \"1000\",\n              name: \"_description\",\n              ref: register({\n                required: {\n                  value: true,\n                  message: 'Ingrese la descripción del evento'\n                }\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Descripci\\xF3n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n              children: \"opcional\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Autocomplete, {\n            name: \"_categories\",\n            multiple: true,\n            id: \"tags-filled\",\n            value: valueAutocomplete,\n            options: words.map(option => option),\n            freeSolo: true,\n            renderTags: (value, getTagProps) => value.map((option, index) => /*#__PURE__*/_jsxDEV(Chip, {\n              variant: \"outlined\",\n              label: option,\n              ...getTagProps({\n                index\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 37\n            }, this)),\n            onChange: (event, newValue) => {\n              setValueAutocomplete([...newValue]);\n            },\n            renderInput: params => /*#__PURE__*/_jsxDEV(TextField, { ...params,\n              label: \"Categor\\xEDas\",\n              placeholder: \"Categoria\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form--input half border picture\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              id: \"file-4\",\n              className: \"normal inputfile inputfile-3\",\n              \"data-multiple-caption\": \"{count} files selected\",\n              accept: \".jpg, .jpeg, .png, .gif\",\n              placeholder: \"Imagen\",\n              name: \"_picture\",\n              ref: register({\n                required: {\n                  value: true,\n                  message: 'Ingrese la imágen del evento'\n                }\n              }),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"file-4\",\n              children: /*#__PURE__*/_jsxDEV(\"h6\", {\n                children: \"Imagen\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Imagen\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form--input half border date\",\n            children: /*#__PURE__*/_jsxDEV(MuiPickersUtilsProvider, {\n              utils: DateFnsUtils,\n              locale: es,\n              children: /*#__PURE__*/_jsxDEV(DateTimePicker, {\n                className: \"seba\",\n                ampm: false,\n                value: selectedDate,\n                onChange: handleDateChange,\n                label: \"Fecha & Hora\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form--input\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              value: 'www.google.cl',\n              autocomplete: \"off\",\n              name: \"_link_event\",\n              type: \"text\",\n              className: \"normal\",\n              placeholder: \"Link Evento\",\n              ref: register({\n                required: {\n                  value: true,\n                  message: 'Ingrese la imágen del evento'\n                }\n              }),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Link evento\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bottom__form\",\n            children: /*#__PURE__*/_jsxDEV(FormControlLabel, {\n              control: /*#__PURE__*/_jsxDEV(PurpleCheckbox, {\n                checked: checkBoxes.createAccount,\n                onChange: handleChangeChecks,\n                name: \"createAccount\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 37\n              }, this),\n              label: \"Quiero registrarme para gestionar mis eventos\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn--create\",\n            children: [loading, \"!\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 21\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"div-link\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"error_create_event\",\n            children: [error, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 25\n        }, this), link && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"div-link\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"link_finally\",\n            children: [\" Tu link \\uD83D\\uDC49\\uD83C\\uDFFB \", /*#__PURE__*/_jsxDEV(\"a\", {\n              target: \"_blank\",\n              href: `${link}`,\n              children: link\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 71\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ReCAPTCHA, {\n      sitekey: process.env.REACT_APP_RECAPTCHA,\n      ref: reRef,\n      size: \"invisible\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 132,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Form, \"FuvYtv2g2Hk6l9vXTwBMpnsEOVk=\", false, function () {\n  return [useForm, useHistory, useSelector];\n});\n\n_c = Form;\nexport default Form;\n\nvar _c;\n\n$RefreshReg$(_c, \"Form\");","map":{"version":3,"sources":["/home/sebastian/Escritorio/timezo/front/src/pages/CreateEvent/Form.js"],"names":["React","Fragment","useState","useRef","useEffect","withStyles","useForm","DateFnsUtils","DateTimePicker","KeyboardDateTimePicker","MuiPickersUtilsProvider","axios","Chip","Autocomplete","makeStyles","TextField","es","words","ReCAPTCHA","useSelector","useDispatch","useHistory","FormLabel","FormControl","FormGroup","FormControlLabel","FormHelperText","Checkbox","LensTwoTone","PurpleCheckbox","root","color","checked","props","Form","openModalSet","register","errors","handleSubmit","history","auth","valueAutocomplete","setValueAutocomplete","selectedDate","handleDateChange","captcha","setCaptcha","link","setlink","error","setError","bodyFormData","setBodyFormData","loading","setLoading","reRef","checkBoxes","setCheckBoxes","createAccount","handleChangeChecks","event","target","name","sendDataToServer","response","token","post","headers","data","message","push","_nick_name","id","onSubmit","e","token_recaptcha","current","executeAsync","FormData","append","_name","_description","JSON","stringify","_link_event","_picture","showExtra","element","document","getElementById","btn","classList","add","required","value","map","option","getTagProps","index","newValue","params","process","env","REACT_APP_RECAPTCHA"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useRef, useEffect } from 'react'\nimport { withStyles } from '@material-ui/core/styles';\nimport { useForm } from 'react-hook-form'\nimport DateFnsUtils from '@date-io/date-fns';\nimport { DateTimePicker, KeyboardDateTimePicker, MuiPickersUtilsProvider } from \"@material-ui/pickers\";\nimport axios from '../../utils/axios';\nimport Chip from '@material-ui/core/Chip';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport es from \"date-fns/locale/es\";\nimport { words } from '../../utils/words'\nimport ReCAPTCHA from \"react-google-recaptcha\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useHistory } from \"react-router-dom\";\n//check boxes form.\nimport FormLabel from '@material-ui/core/FormLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { LensTwoTone } from '@material-ui/icons';\n\nconst PurpleCheckbox = withStyles({\n    root: {\n        color: \"#8266E2\",\n        '&$checked': {\n            color: \"#8266E2\",\n        },\n    },\n    checked: {},\n})((props) => <Checkbox color=\"default\" {...props} />);\n\n\nconst Form = ({ openModalSet }) => {\n    const { register, errors, handleSubmit } = useForm();\n\n    const history = useHistory();\n    const auth = useSelector(({ auth }) => auth);\n    const [valueAutocomplete, setValueAutocomplete] = React.useState([]);\n    const [selectedDate, handleDateChange] = useState(null);\n    const [captcha, setCaptcha] = useState(null);\n    const [link, setlink] = useState()\n    const [error, setError] = useState()\n    const [bodyFormData, setBodyFormData] = useState()\n    const [loading, setLoading] = useState('Crear')\n    const reRef = useRef();\n\n    const [checkBoxes, setCheckBoxes] = React.useState({\n        createAccount: false,\n    });\n\n    const handleChangeChecks = (event) => {\n        setCheckBoxes({ ...checkBoxes, [event.target.name]: event.target.checked });\n    };\n\n    const sendDataToServer = async () => {\n        if (bodyFormData) {\n            var response;\n            if (auth.token) {\n                response = await axios.post('api/createAuth', bodyFormData, { headers: { 'Content-Type': 'multipart/form-data', 'Authorization': auth.token } });\n            } else {\n                response = await axios.post('api/create', bodyFormData, { headers: { 'Content-Type': 'multipart/form-data' } });\n            }\n            setLoading('Crear')\n            if (response.data.message) {\n                setError(response.data.message)\n            } else {\n                history.push(\"/\" + response.data._nick_name + '/' + response.data.id);\n            }\n        }\n    }\n\n    useEffect(() => {\n        if (bodyFormData) {\n            if (checkBoxes.createAccount == false) {\n                sendDataToServer()\n            } else if (checkBoxes.createAccount == true && auth.token) {\n                sendDataToServer()\n            } else {\n                //ejecutar el modal de registro.\n                openModalSet(true);\n            }\n        }\n    }, [bodyFormData, auth.token])\n\n    useEffect(() => {\n        if (bodyFormData) {\n            if (checkBoxes.createAccount == false) {\n                sendDataToServer()\n            } else if (checkBoxes.createAccount == true && auth.token) {\n                sendDataToServer()\n            } else {\n                //ejecutar el modal de registro.\n                openModalSet(true);\n            }\n        }\n    }, [auth.token])\n\n\n    const onSubmit = async (data, e) => {\n        setError(null)\n        setLoading('Cargando...')\n        debugger;\n        let token_recaptcha = null;\n        if (!captcha) {\n            token_recaptcha = await reRef.current.executeAsync();\n            setCaptcha(token_recaptcha)\n        }\n        var bodyFormData = new FormData();\n        bodyFormData.append('token_recaptcha', captcha ? captcha : token_recaptcha);\n        bodyFormData.append('_name', data._name);\n        bodyFormData.append('_description', data._description);\n        bodyFormData.append('_categories', JSON.stringify(valueAutocomplete));\n        bodyFormData.append('_event_time', selectedDate);\n        bodyFormData.append('_link_event', data._link_event);\n        bodyFormData.append('galleryImage', data._picture[0]);\n        setBodyFormData(bodyFormData)// ejecuta el useEffect\n\n    }\n\n\n    function showExtra() {\n        var element = document.getElementById(\"extra\");\n        var btn = document.getElementById(\"btnExtra\");\n        element.classList.add(\"show\");\n        btn.classList.add(\"hide\");\n    }\n\n    return (\n        <Fragment>\n            <form onSubmit={handleSubmit(onSubmit)}>\n                <div className=\"form__event\">\n                    <div className=\"cont__form\">\n                        <div className=\"form--input\">\n                            <input value={'hola'} type=\"text\" autocomplete=\"off\" className=\"normal\" placeholder=\"Nombre Evento\" minlength=\"2\" maxlength=\"150\" required\n                                name=\"_name\"\n                                ref={\n                                    register({\n                                        required: { value: true, message: 'Ingrese el nombre del evento' }\n                                    })}\n                            />\n                            <span>Nombre Evento</span>\n                        </div>\n\n                        <div className=\"form--input optional\">\n                            <input value={'hola'} type=\"text\" autocomplete=\"off\" className=\"normal\" placeholder=\"Descripción\" minlength=\"0\" maxlength=\"1000\"\n                                name=\"_description\"\n                                ref={\n                                    register({\n                                        required: { value: true, message: 'Ingrese la descripción del evento' }\n                                    })}\n                            />\n                            <span>Descripción</span>\n                            <h5>opcional</h5>\n                        </div>\n\n                        {/*<input type=\"text\" className=\"normal\" placeholder=\"Categorías\" />*/}\n\n                        <Autocomplete\n                            name=\"_categories\"\n                            multiple\n                            id=\"tags-filled\"\n                            value={valueAutocomplete}\n                            options={words.map((option) => option)}\n                            freeSolo\n                            renderTags={(value, getTagProps) =>\n                                value.map((option, index) => (\n                                    <Chip variant=\"outlined\" label={option} {...getTagProps({ index })} />\n                                ))\n                            }\n                            onChange={(event, newValue) => {\n                                setValueAutocomplete([...newValue])\n\n                            }}\n                            renderInput={(params) => (\n                                <TextField {...params} label=\"Categorías\" placeholder=\"Categoria\" />\n                            )}\n                        />\n\n                        <div className=\"form--input half border picture\">\n                            <input type=\"file\"\n                                id=\"file-4\"\n                                className=\"normal inputfile inputfile-3\"\n                                data-multiple-caption=\"{count} files selected\"\n                                accept=\".jpg, .jpeg, .png, .gif\"\n                                placeholder=\"Imagen\"\n                                name=\"_picture\"\n                                ref={\n                                    register({\n                                        required: { value: true, message: 'Ingrese la imágen del evento' }\n                                    })}\n                                required />\n                            <label for=\"file-4\">\n                                <h6>Imagen</h6>\n                            </label>\n                            <span>Imagen</span>\n                        </div>\n\n                        <div className=\"form--input half border date\">\n                            <MuiPickersUtilsProvider utils={DateFnsUtils} locale={es}>\n                                <DateTimePicker\n                                    className=\"seba\"\n                                    ampm={false}\n                                    value={selectedDate}\n                                    onChange={handleDateChange}\n                                    label=\"Fecha & Hora\"\n                                />\n                            </MuiPickersUtilsProvider>\n                        </div>\n\n                        <div className=\"form--input\">\n                            <input value={'www.google.cl'} autocomplete=\"off\" name=\"_link_event\" type=\"text\" className=\"normal\" placeholder=\"Link Evento\"\n                                ref={\n                                    register({\n                                        required: { value: true, message: 'Ingrese la imágen del evento' }\n                                    })}\n                                required />\n                            <span>Link evento</span>\n                        </div>\n\n                        <div className=\"bottom__form\">\n\n                            <FormControlLabel\n                                control={\n                                    <PurpleCheckbox\n                                        checked={checkBoxes.createAccount}\n                                        onChange={handleChangeChecks} name=\"createAccount\"\n                                    />\n                                }\n                                label=\"Quiero registrarme para gestionar mis eventos\"\n                            />\n\n                            {/* \n                                <div class=\"opt\" onClick={() => showExtra()} id=\"btnExtra\">Opciones avanzadas</div>\n\n                                    <div class=\"extra\" id=\"extra\">\n                                        <div class=\"form--check\">\n                                            <label for=\"caca\">Lorem ipsum dolor sit amet</label>\n                                            <input type=\"checkbox\" id=\"caca\" checked />\n                                            <span></span>\n                                        </div>\n\n                                        <div class=\"form--check\">\n                                            <label for=\"caca\">Consectetur adipisicing elit</label>\n                                            <input type=\"checkbox\" id=\"caca\" checked />\n                                            <span></span>\n                                        </div>\n                                        <div class=\"form--check\">\n                                            <label for=\"caca\">Laboriosam eaque ducimus eum autem</label>\n                                            <input type=\"checkbox\" id=\"caca\" checked />\n                                            <span></span>\n                                        </div>\n                                    </div>\n                            */}\n\n\n                        </div>\n                        <button type=\"submit\" className=\"btn--create\">{loading}!</button>\n\n                    </div>\n\n                    {error &&\n                        <div className=\"div-link\">\n                            <p className=\"error_create_event\">{error} </p>\n                        </div>\n                    }\n\n                    {link &&\n                        <div className=\"div-link\">\n                            <p className=\"link_finally\"> Tu link 👉🏻 <a target=\"_blank\" href={`${link}`} >{link}</a> </p>\n                        </div>\n                    }\n                </div>\n            </form>\n\n            <ReCAPTCHA\n                sitekey={process.env.REACT_APP_RECAPTCHA}\n                ref={reRef}\n                size=\"invisible\"\n            />\n        </Fragment >\n    )\n}\n\nexport default Form;"]},"metadata":{},"sourceType":"module"}